{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Order Successful</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root{ --primary:#0f1f4f; --secondary:#1a2d5a; --light:#f5f7fa; --muted:#6b7280; --success:#2ecc71; }
        body{background:linear-gradient(180deg,#f8fafc 0%, #ffffff 100%); font-family:Segoe UI, Tahoma, Arial, sans-serif; color:#111827}
        .card-premium{ background: linear-gradient(180deg, #ffffff 0%, #f8fbff 100%); border-radius:12px; box-shadow:0 12px 30px rgba(15,31,79,0.08); border:1px solid rgba(15,31,79,0.06); }
        .badge-primary{ background:var(--primary); color:white; padding:6px 12px; border-radius:8px; font-weight:700; }
        .badge-pending{ background:#ffc107; color:#333; padding:6px 12px; border-radius:8px; font-weight:700; }
        .badge-paid{ background:#28a745; color:white; padding:6px 12px; border-radius:8px; font-weight:700; }
        .btn-primary-grad{ background: linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%); color:white; border:none; }
        .invoice-card{ border:1px solid rgba(15,31,79,0.06); border-radius:8px; padding:16px; background: #fff; }
        .muted{ color:var(--muted); }
        .payment-info{ background:#f0f4ff; padding:16px; border-radius:8px; border-left:4px solid var(--primary); margin:16px 0; }
        .payment-method-label{ font-weight:600; color:var(--primary); margin-bottom:8px; }
    </style>
</head>
<body>
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card-premium p-4">
                <div class="d-flex align-items-center gap-3">
                    <div style="width:80px; height:80px; background:linear-gradient(135deg,var(--primary),var(--secondary)); border-radius:14px; display:flex; align-items:center; justify-content:center; color:white; font-size:34px;">
                        ‚úì
                    </div>
                    <div>
                        <h2 style="margin:0; color:var(--primary);">Order Confirmed</h2>
                        <div class="muted" style="margin-top:4px;">Thank you ‚Äî your order is being prepared for shipment.</div>
                    </div>
                    <div class="ms-auto text-end">
                        <div class="badge-primary">Premium</div>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-md-7">
                        <div class="mb-3">
                            <strong>Shipping To</strong>
                            <div class="muted">{{ shipping_address }}</div>
                        </div>
                        <div class="mb-3">
                            <strong>Contact</strong>
                            <div class="muted">{{ mobile }}</div>
                        </div>
                        <div class="mb-3">
                            <strong>Total Paid</strong>
                            <div style="font-size:1.25rem; color:var(--primary); font-weight:700;">‚Çπ{{ total_amount }}</div>
                        </div>
                        
                        <!-- Payment Information Section -->
                        <div class="payment-info">
                            <div class="payment-method-label">
                                Payment Method: 
                                {% if payment_method == 'razorpay' %}
                                    Razorpay
                                {% elif payment_method == 'upi_qr' %}
                                    UPI / Manual Transfer
                                {% else %}
                                    Cash on Delivery
                                {% endif %}
                            </div>
                            
                            {% if payment_method == 'razorpay' %}
                                <div>
                                    {% if payment_status == 'paid' %}
                                        <span class="badge-paid">‚úì Payment Confirmed</span>
                                        <p class="muted mt-2 mb-0" style="font-size:0.9rem;">Your payment has been successfully processed. Your order will be shipped soon.</p>
                                    {% else %}
                                        <span class="badge-pending">‚è≥ Pending Payment</span>
                                        <p class="muted mt-2 mb-0" style="font-size:0.9rem;">Your payment is being processed. Please wait...</p>
                                    {% endif %}
                                </div>
                            {% elif payment_method == 'upi_qr' %}
                                <div>
                                    <span class="badge-pending">‚è≥ Awaiting Payment</span>
                                    <p class="muted mt-2 mb-0" style="font-size:0.9rem;">Please complete the payment using the UPI QR code or provide your transaction ID. Your order will be confirmed upon payment receipt.</p>
                                </div>
                            {% else %}
                                <div>
                                    <span class="badge-primary">üöö Cash on Delivery</span>
                                    <p class="muted mt-2 mb-0" style="font-size:0.9rem;">You will pay when your order is delivered. Please keep your mobile number available for delivery updates.</p>
                                </div>
                            {% endif %}
                        </div>
                        <div class="mt-3">
                            <a href="{% url 'home' %}" class="btn btn-outline-dark">Continue Shopping</a>
                            <a href="{% url 'customer_dashboard' %}" class="btn btn-outline-secondary ms-2">My Orders</a>
                        </div>
                    </div>

                    <div class="col-md-5 d-flex align-items-center justify-content-center">
                        <div class="text-center">
                            <h6 style="margin-bottom:10px; color:var(--primary);">Invoices</h6>
                            <p class="muted">Your invoice(s) are available for download.</p>
                            {% with invoices|first as inv %}
                                {% if inv %}
                                    <a href="{% url 'download_invoice_consolidated' inv.id %}" class="btn btn-primary-grad">Download Invoice(s)</a>
                                {% else %}
                                    <a href="{% url 'invoice_list' %}" class="btn btn-primary-grad">Download Invoice(s)</a>
                                {% endif %}
                            {% endwith %}
                        </div>
                    </div>
                </div>

                <div class="mt-4 muted" style="font-size:13px;">An email confirmation with order and invoice details has been sent to your email address.</div>
            </div>
        </div>
    </div>
</div>
</body>
</html>